%TODO的使用
%%TODO 有关内容
%%FIXME 格式的bug
%%HACK 粗鄙技巧

%TODO——注意事项
%% 脚注段落缩进，带框公式不加标点
%% 理想气体、可逆、绝热等公式特殊标注
%% 绝热：Adiabatic 等压：Isobaric 等容：Isochoric 等温：Isothermal 等熵：Isentropic 等焓：Isenthalpic 多方：Polytropic 准静态：Quasistatic 

\documentclass[UTF8]{ctexbook}

%TODO——宏包
%页面格式
\usepackage{geometry}
	\geometry{a4paper, twoside, left = 2.54 cm, right = 2.54 cm, top = 3.18 cm, bottom = 3.18 cm, headheight = 3 cm}
\usepackage{fancyhdr}
	\pagestyle{fancy}
	\fancyhf{}
	\fancyhead[EL]{\nouppercase{\CJKfamily{楷体} \leftmark}}
	\fancyhead[OR]{\nouppercase{\CJKfamily{楷体} \rightmark}}
	\fancyfoot[C]{\thepage}
	\renewcommand{\headrulewidth}{0 pt}

\usepackage{titlesec}
%	\newcommand{\sectionbreak}{\clearpage}

%交叉引用、超链接、PDF书签
\usepackage[hyperfootnotes=false]{hyperref}
	\hypersetup{
		bookmarksopen = true,
		bookmarksopenlevel = 1,
		pdfborder = 0 0 0
	}%FIXME：PDF书签有公式会报错，Latex入门 p173

%脚注
\usepackage[stable, perpage]{footmisc}
\usepackage{pifont}
	\renewcommand{\thefootnote}{\ding{\numexpr171+\value{footnote}}}
%\interfootnotelinepenalty = 10000

%数学支持
\usepackage{amsmath}
	\numberwithin{equation}{section}
	\renewcommand{\theequation}{\thesection.\arabic{equation}} %公式编号样式x.x.x
\usepackage{mathtools}
\usepackage[adobe-garamond]{mathdesign}
%\usepackage[urw-garamond]{mathdesign} %免费字体
\usepackage[ntheorem]{empheq}
\usepackage{bm}
%\usepackage{pifont} %已在“脚注”中调用
	\newcommand{\cmark}{\ding{51}}
	\newcommand{\xmark}{\ding{55}}

%中文支持
\usepackage{xeCJK}
	\xeCJKsetup{
%		PunctStyle = quanjiao,
		AutoFakeBold = false,
		AutoFakeSlant = false
	}
	\setCJKmainfont[BoldFont = 华文中宋, ItalicFont = 华文楷体, Mapping = fullwidth-stop]{华文宋体}
	\setCJKfamilyfont{中宋}[Mapping = fullwidth-stop]{华文中宋}
	\setCJKfamilyfont{楷体}[Mapping = fullwidth-stop]{华文楷体}
	\setCJKfamilyfont{仿宋}[Mapping = fullwidth-stop]{华文仿宋}
	\setCJKfamilyfont{黑体}[Mapping = fullwidth-stop]{华文黑体}
	\newcommand{\myHeavy}{\fontspec{MyriadPro-Regular} \CJKfamily{黑体}}
%\usepackage{ctex} %已经使用了ctexbook文档类
	\setcounter{secnumdepth}{4}
	\ctexset{
		part = {
			format = {\bfseries \Huge \centering},
			name = {第, 篇}
		},
		chapter = {
			format = {\bfseries \LARGE \raggedright},
		},
		section = {
			format = {\bfseries \Large \centering},
		},
		subsection = {
			format = {\bfseries},
			name = {,、\hspace{-1 em}},
			numbering = true,
			number = \chinese{subsection},
		}
	}

%符号支持
%\usepackage{gensymb}

%单位
\usepackage{siunitx}
	\sisetup{
		number-math-rm = \ensuremath,
		inter-unit-product = \ensuremath{{}\cdot{}},
		group-digits = integer,
		group-minimum-digits = 4,
		group-separator = \text{~}
	}

%枚举
\usepackage{enumitem}
	\SetLabelAlign{leftalignwithindent}{\hspace{2.1 em} \makebox[1.6 em][l]{#1}}

%定理类环境
\usepackage[thmmarks, amsmath]{ntheorem}
	\theoremstyle{empty} %不带编号
	\theoremsymbol{\ensuremath{\Box}}
		\newtheorem{_myProof}{}
	
	\theoremstyle{empty} %不带编号
	\theoremheaderfont{\myHeavy}
	\theorembodyfont{\CJKfamily{楷体}}
	\theoremsymbol{}
%	\theoremindent \parindent
		\newtheorem{_myThm}{}
	
	\theoremstyle{plain} %带编号
	\theoremheaderfont{\myHeavy}
	\theorembodyfont{\normalfont}
	\theoremsymbol{}
%	\theoremsymbol{\ensuremath{\triangleleft}}
		\newtheorem{myExample}{例}[chapter]

%表格
\usepackage{array}
	\newcolumntype{M}{>{$}c<{$}} %数学模式，居中
\usepackage{tabularx}
	\newcolumntype{Y}{>{\centering\arraybackslash}X} %定宽居中
\usepackage{booktabs} %三线表

%图片
\usepackage{graphicx}
\usepackage{asymptote}
	\begin{asydef}
		usepackage("amsmath");
		usepackage("mathtools");
		usepackage("mathdesign", "adobe-garamond");
		usepackage("bm");
		usepackage("xeCJK");
			texpreamble("\setCJKmainfont[BoldFont = 华文中宋, ItalicFont = 华文楷体]{华文宋体}");
			texpreamble("\setmainfont{AGaramondPro-Regular.otf}");
		usepackage("siunitx");
			texpreamble("\sisetup{
				number-math-rm = \ensuremath,
				inter-unit-product = \ensuremath{{}\cdot{}},
				group-digits = integer,
				group-minimum-digits = 4,
				group-separator = \text{~}
			}");
		texpreamble("\input{Symbols.tex}");
		texpreamble("\newcommand{\emphA}[1]{{\myHeavy #1}}");
		texpreamble("\newcommand{\emphB}[1]{{\itshape #1}}");
		
		size(6 cm);
		
		defaultpen(fontsize(9 pt));
		
		pen color1 = rgb(0.368417, 0.506779, 0.709798);
		pen color2 = rgb(0.880722, 0.611041, 0.142051);
		pen color3 = rgb(0.560181, 0.691569, 0.194885);
		pen color4 = rgb(0.922526, 0.385626, 0.209179);
		pen color5 = rgb(0.647624, 0.378160, 0.614037);
		pen color6 = rgb(0.772079, 0.431554, 0.102387);
		pen color7 = rgb(0.363898, 0.618501, 0.782349);
		pen color8 = rgb(0.972829, 0.621644, 0.073362);
	\end{asydef}

%浮动体、图标标题
\renewcommand{\thefigure}{\arabic{chapter}.\arabic{figure}}
\usepackage{floatrow}
	\floatsetup[table]{capposition = top}
\usepackage{caption}
	\DeclareCaptionFont{myCationFont}{\CJKfamily{楷体} \small}
	\captionsetup[figure]{
		font = myCationFont,
		labelsep = quad,
		skip = 10 pt,
		position = bottom
	}
	\captionsetup[table]{
		font = myCationFont,
		labelsep = quad,
		skip = 10 pt,
		position = top
	}


%TODO——自定义环境
%自定义定理（定律）
\newenvironment{myThm}[1]
	{\begin{_myThm}[\hskip 2 em #1]}
	{\end{_myThm}}
\newenvironment{myThm*}
	{\begin{_myThm} \hskip 2 em}
	{\end{_myThm}}
%自定义证明（说明）
\newenvironment{myProof}
	{\begin{_myProof} \normalfont \small \CJKfamily{仿宋} \hskip 2 em}
	{\end{_myProof}}
%自定义列表
\newenvironment{myEnum1}
	{\begin{enumerate} [label = \alph*), align = leftalignwithindent, leftmargin = 0 pt, itemsep = 10 pt, parsep = 0 pt, listparindent = 2 em]}
	{\end{enumerate}}
\newenvironment{myEnum2}
	{\begin{enumerate} [label = (\Roman*), align = leftalignwithindent, leftmargin = 2 em, topsep = 0pt, itemsep = 0 pt, parsep = 0 pt, listparindent = 2 em]}
	{\end{enumerate}}
%子公式
\newenvironment{mySubEq}
	{\subequations \renewcommand{\theequation}{\theparentequation-\alph{equation}}}
	{\endsubequations
	\ignorespacesafterend}
%带框公式
\newenvironment{boxedEq}
	{\empheq[box = \fbox]{equation}}
	{\endempheq}
%大括号公式
\newenvironment{braceEq}[1][align]
	{\mySubEq
		\setkeys{EmphEqEnv}{#1}
		\setkeys{EmphEqOpt}{left = \empheqlbrace}
		\EmphEqMainEnv}
	{\endEmphEqMainEnv \endmySubEq}
%自定义表格 {format}{caption}{label}
\newenvironment{myTable}[4][htb]
	{\begin{table}[#1] \centering \small \caption{#3} \label{#4} \begin{tabular}{#2}}
	{\end{tabular} \end{table}}

%TODO——自定义命令
\input{Symbols.tex}

%强调
\newcommand{\emphA}[1]{{\myHeavy #1}}
\newcommand{\emphB}[1]{{\itshape #1}}

%引入文件
\let \oldInclude = \include
\renewcommand{\include}[1]{{\let \clearpage = \relax \oldInclude{#1}}}
%空行
\newcommand{\blankline}{\mbox{}}
%自定义列表项目（不可删除换行！）
\newcommand{\myItem}[1]{
	\item
	{\bfseries #1}
	
	
}
%引用格式
\newcommand{\secref}[1]{\secSymbol \ref{#1} }
\newcommand{\subsecref}[1]{第\ref{#1}小节}
\newcommand{\egref}[1]{例 \ref{#1}}
%公式标注
\newcommand{\myTag}[1]{\tag*{\CJKfamily{楷体} [#1]}}
\newcommand{\myTagNumbering}[1]{\refstepcounter{equation} \tag*{\CJKfamily{楷体} [#1] \, (\theequation)} }

\title{
	\vspace{-4 cm}
	\bfseries
	热力学与统计物理I
}
\author{
	\CJKfamily{楷体}
	复旦大学\phantom{空格}陈焱
}
\date{
	\CJKfamily{楷体}
	\today
}

\begin{document}
%	\maketitle
%	
%	\frontmatter
%	{\let \cleardoublepage = \clearpage
%		\chapter{绪论}
%			\include{Chapters/Front_Introduction}
%			
%		\chapter{符号表}
%			\include{Chapters/Front_Symbols}
%			
%		\chapter{缩略词表}
%			\include{Chapters/Front_Abbreviations}
%	}
%	\mainmatter
%	\part{热力学}
		\chapter{热力学基础}
			\include{Chapters/Chapter1}
			
		\chapter{均匀系统的平衡特性}
			\include{Chapters/Chapter2}
			
		\chapter{相变的热力学理论}
			\include{Chapters/Chapter3}
			
%		\chapter{多元复相 热力学第三定律}
%			\include{Chapters/Chapter4}
%			
%	\part{统计物理}
%		\chapter{统计物理学基本概念}
%			\include{Chapters/Chapter5}
		
%		\chapter{统计}
%			\include{Chapters/Chapter6}
%		
%		\chapter{系综理论}
%			\include{Chapters/Chapter7}
%		
%		\chapter{相变的统计物理简介}
%			\include{Chapters/Chapter8}
		
\end{document}